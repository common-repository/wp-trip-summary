!function(){"use strict";function getShortcodeContent(tinymceEditor){return['<p id="abp01-shortcode-container">',"["+tinymceEditor.settings.abp01_viewer_short_code_name+"]","</p>"].join("")}function getExistingShortcodeElement(tinymceEditor){var body=tinymceEditor.getBody();return body.querySelector?body.querySelector("#abp01-shortcode-container"):body.ownerDocument.getElementById("abp01-shortcode-container")}function insertShortcodeContent(tinymceEditor){tinymceEditor.execCommand("mceInsertContent",0,getShortcodeContent(tinymceEditor)),tinymceEditor.selection.select(getExistingShortcodeElement(tinymceEditor))}tinymce.create("abp01.plugins.ViewerShortcode",{init:function(tinymceEditor,pluginAbsoluteUrl){tinymceEditor.addButton("abp01_insert_viewer_shortcode",{title:"Insert Trip Summary Viewer Shortcode",cmd:"abp01_insert_viewer_shortcode",image:pluginAbsoluteUrl+"/button.png"}),tinymceEditor.addCommand("abp01_insert_viewer_shortcode",(function(){var existing=getExistingShortcodeElement(tinymceEditor),translatedMessge=tinymceEditor.translate("Shortcode already exists. Do you wish to move it at the new position?");null!=existing?confirm(translatedMessge)&&(existing.remove(),insertShortcodeContent(tinymceEditor)):insertShortcodeContent(tinymceEditor)}))},createControl:function(controlName,tinymceControlManager){return null},getInfo:function(){return{longname:"WP Trip Summary Viewer Shortcode Button",author:"Alexandru Boia",authorurl:"http://alexboia.net/",infourl:"https://wordpress.org/plugins/wp-trip-summary/",version:"0.1"}}}),tinymce.PluginManager.add("abp01_viewer_shortcode",abp01.plugins.ViewerShortcode)}();